(()=>{"use strict";var t={36:(t,o,e)=>{var a=e(751),n=e(641);function i(t,o){const e=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(e)}var s=e(262);const r={},l=(0,s.A)(r,[["render",i]]),u=l;var c=e(223),p=e(813),d=e(933),m=e(391),h=e(220);function g(t,o,e,a,i,s){const r=(0,n.g2)("NovoPino"),l=(0,n.g2)("MapView");return(0,n.uX)(),(0,n.CE)("div",null,[o[1]||(o[1]=(0,n.Lk)("h1",null,"GroupBy",-1)),(0,n.Lk)("button",{onClick:o[0]||(o[0]=(...t)=>a.logout&&a.logout(...t))},"Logout"),(0,n.bF)(r),(0,n.bF)(l)])}var b=e(33);const f={class:"flex"},k={class:"w-64 bg-white shadow p-4 h-screen overflow-y-auto hidden md:block"},v={class:"space-y-3"},y={class:"flex-1 relative"},L={key:0,class:"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-white shadow-lg rounded-xl p-4 w-[300px] z-10"},w={class:"flex justify-between items-center mb-2"},x={class:"text-lg font-semibold"},C={class:"text-sm"},P={class:"text-sm"};function E(t,o,e,i,s,r){return(0,n.uX)(),(0,n.CE)("div",f,[(0,n.Lk)("aside",k,[o[10]||(o[10]=(0,n.Lk)("h2",{class:"text-lg font-semibold mb-4"},"Filtrar Pinos",-1)),(0,n.Lk)("div",v,[(0,n.Lk)("div",null,[o[5]||(o[5]=(0,n.Lk)("label",{class:"block text-sm font-medium"},"Categoria:",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>s.categoriaSelecionada=t),class:"w-full border rounded px-2 py-1"},o[4]||(o[4]=[(0,n.Lk)("option",{value:""},"Todas",-1),(0,n.Lk)("option",{value:"Social"},"🧑‍🤝‍🧑 Social",-1),(0,n.Lk)("option",{value:"Estudo"},"📚 Estudo",-1),(0,n.Lk)("option",{value:"Trabalho"},"🧑‍💼 Trabalho",-1)]),512),[[a.u1,s.categoriaSelecionada]])]),(0,n.Lk)("div",null,[o[7]||(o[7]=(0,n.Lk)("label",{class:"block text-sm font-medium"},"Distância:",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>s.filtroDistancia=t),class:"w-full border rounded px-2 py-1"},o[6]||(o[6]=[(0,n.Lk)("option",{value:""},"Todas",-1),(0,n.Lk)("option",{value:"10"},"Até 10km",-1),(0,n.Lk)("option",{value:"50"},"Até 50km",-1),(0,n.Lk)("option",{value:"100"},"Até 100km",-1)]),512),[[a.u1,s.filtroDistancia]])]),(0,n.Lk)("div",null,[o[9]||(o[9]=(0,n.Lk)("label",{class:"block text-sm font-medium"},"Popularidade:",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>s.filtroPopularidade=t),class:"w-full border rounded px-2 py-1"},o[8]||(o[8]=[(0,n.Lk)("option",{value:""},"Todas",-1),(0,n.Lk)("option",{value:"popular"},"Mais populares",-1)]),512),[[a.u1,s.filtroPopularidade]])])])]),(0,n.Lk)("div",y,[o[12]||(o[12]=(0,n.Lk)("div",{id:"map",style:{width:"100%",height:"100vh"}},null,-1)),s.pinoSelecionado?((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("div",w,[(0,n.Lk)("h3",x,(0,b.v_)(s.pinoSelecionado.nome),1),(0,n.Lk)("button",{onClick:o[3]||(o[3]=t=>s.pinoSelecionado=null),class:"text-gray-500 hover:text-red-600"},"✕")]),(0,n.Lk)("p",C,"📍 "+(0,b.v_)(s.pinoSelecionado.categoria),1),(0,n.Lk)("p",P,"👥 "+(0,b.v_)(Object.keys(s.pinoSelecionado.participantes||{}).length)+" participantes",1),o[11]||(o[11]=(0,n.Lk)("button",{class:"mt-3 w-full bg-blue-600 text-white py-1.5 rounded hover:bg-blue-700"}," Entrar no grupo ",-1))])):(0,n.Q3)("",!0)])])}const I={data(){return{pinoSelecionado:null,categoriaSelecionada:"",filtroDistancia:"",filtroPopularidade:"",minhaPos:{lat:-14.2,lng:-51.9},map:null}},mounted(){navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{this.minhaPos={lat:t.coords.latitude,lng:t.coords.longitude},this.initMap()}),this.initMap):this.initMap()},methods:{getIconForCategoria(t){return"Social"===t?"https://maps.google.com/mapfiles/ms/icons/red-dot.png":"Estudo"===t?"https://maps.google.com/mapfiles/ms/icons/blue-dot.png":"Trabalho"===t?"https://maps.google.com/mapfiles/ms/icons/green-dot.png":null},initMap(){this.map=new google.maps.Map(document.getElementById("map"),{zoom:5,center:this.minhaPos});const t=(0,d.C3)(),o=(0,d.KR)(t,"pinos");(0,d.Zy)(o,(t=>{const o=t.val();o&&Object.entries(o).forEach((([t,o])=>{if(this.categoriaSelecionada&&o.categoria!==this.categoriaSelecionada)return;if("popular"===this.filtroPopularidade&&(!o.participantes||Object.keys(o.participantes).length<3))return;if(this.filtroDistancia){const t=this.calcularDistancia(this.minhaPos.lat,this.minhaPos.lng,o.lat,o.lng);if(t>parseInt(this.filtroDistancia))return}const e=new google.maps.Marker({position:{lat:o.lat,lng:o.lng},map:this.map,title:o.nome,icon:this.getIconForCategoria(o.categoria)}),a=new google.maps.InfoWindow({content:`<b>${o.nome}</b>`});e.addListener("mouseover",(()=>a.open(this.map,e))),e.addListener("mouseout",(()=>a.close())),e.addListener("click",(()=>{this.pinoSelecionado=o}))}))}))},calcularDistancia(t,o,e,a){const n=6371,i=(e-t)*Math.PI/180,s=(a-o)*Math.PI/180,r=Math.sin(i/2)**2+Math.cos(t*Math.PI/180)*Math.cos(e*Math.PI/180)*Math.sin(s/2)**2,l=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return n*l}}},M=(0,s.A)(I,[["render",E]]),U=M;const S={components:{MapView:U},setup(){const t=()=>{const t=(0,m.xI)();(0,m.CI)(t)};return{logout:t}}},X=(0,s.A)(S,[["render",g]]),O=X;function V(t,o,e,i,s,r){return(0,n.uX)(),(0,n.CE)("div",null,[o[4]||(o[4]=(0,n.Lk)("h2",null,"Login",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>s.email=t),placeholder:"Email"},null,512),[[a.Jo,s.email]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>s.password=t),type:"password",placeholder:"Senha"},null,512),[[a.Jo,s.password]]),(0,n.Lk)("button",{onClick:o[2]||(o[2]=(...t)=>i.login&&i.login(...t))},"Login"),(0,n.Lk)("button",{onClick:o[3]||(o[3]=(...t)=>i.anonymous&&i.anonymous(...t))},"Entrar como Anônimo")])}const j={data(){return{email:"",password:""}},setup(){const t=(0,h.rd)(),o=(0,m.xI)(),e=async()=>{await(0,m.x9)(o,this.email,this.password),t.push("/")},a=async()=>{await(0,m.zK)(o),t.push("/")};return{login:e,anonymous:a}}},A=(0,s.A)(j,[["render",V]]),K=A,R={key:0},z=["onClick"];function _(t,o,e,a,i,s){return(0,n.uX)(),(0,n.CE)("div",null,[o[0]||(o[0]=(0,n.Lk)("h2",null,"Todos os Pinos",-1)),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.pinos,((t,o)=>((0,n.uX)(),(0,n.CE)("li",{key:o},[(0,n.Lk)("strong",null,(0,b.v_)(t.nome),1),(0,n.eW)(" - "+(0,b.v_)(t.descricao)+" ",1),t.createdBy===i.user?.uid?((0,n.uX)(),(0,n.CE)("span",R,"(meu)")):(0,n.Q3)("",!0),t.createdBy===i.user?.uid?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:t=>s.removerPino(o)},"Remover",8,z)):(0,n.Q3)("",!0)])))),128))])])}const D={data(){return{user:null,pinos:{}}},mounted(){const t=(0,m.xI)();this.user=t.currentUser;const o=(0,d.C3)(),e=(0,d.KR)(o,"pinos");(0,d.Zy)(e,(t=>{this.pinos=t.val()||{}}))},methods:{removerPino(t){const o=(0,d.C3)();(0,d.TF)((0,d.KR)(o,"pinos/"+t))}}},B=(0,s.A)(D,[["render",_]]),N=B,T={key:0},Z=["src"];function F(t,o,e,i,s,r){return(0,n.uX)(),(0,n.CE)("div",null,[o[3]||(o[3]=(0,n.Lk)("h2",null,"Meu Perfil",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>s.nome=t),placeholder:"Nome de exibição"},null,512),[[a.Jo,s.nome]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>s.avatarUrl=t),placeholder:"URL da imagem de perfil"},null,512),[[a.Jo,s.avatarUrl]]),(0,n.Lk)("button",{onClick:o[2]||(o[2]=(...t)=>r.salvar&&r.salvar(...t))},"Salvar"),s.avatarUrl?((0,n.uX)(),(0,n.CE)("div",T,[(0,n.Lk)("img",{src:s.avatarUrl,alt:"avatar",style:{width:"100px",height:"100px","border-radius":"50%"}},null,8,Z)])):(0,n.Q3)("",!0)])}const H={data(){return{nome:"",avatarUrl:""}},mounted(){const t=(0,m.xI)(),o=(0,d.C3)(),e=t.currentUser?.uid;if(!e)return;const a=(0,d.KR)(o,"usuarios/"+e);fetch(a.toString()).then((t=>t.json())).then((t=>{t&&(this.nome=t.nome||"",this.avatarUrl=t.avatar||"")}))},methods:{salvar(){const t=(0,m.xI)(),o=t.currentUser?.uid,e=(0,d.C3)();(0,d.hZ)((0,d.KR)(e,"usuarios/"+o),{nome:this.nome,avatar:this.avatarUrl}),alert("Perfil salvo.")}}},J=(0,s.A)(H,[["render",F]]),G=J,W={class:"p-4"},Q={class:"min-w-full border text-sm"},Y={class:"p-2"},q={class:"p-2"},$={class:"p-2"},tt={class:"p-2"};function ot(t,o,e,a,i,s){return(0,n.uX)(),(0,n.CE)("div",W,[o[1]||(o[1]=(0,n.Lk)("h2",{class:"text-lg font-bold mb-4"},"Painel de Pinos",-1)),(0,n.Lk)("table",Q,[o[0]||(o[0]=(0,n.Lk)("thead",{class:"bg-gray-200"},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{class:"p-2 text-left"},"Nome"),(0,n.Lk)("th",{class:"p-2 text-left"},"Criador"),(0,n.Lk)("th",{class:"p-2 text-left"},"Categoria"),(0,n.Lk)("th",{class:"p-2 text-left"},"Participantes")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.pinos,((t,o)=>((0,n.uX)(),(0,n.CE)("tr",{key:o,class:"border-t"},[(0,n.Lk)("td",Y,(0,b.v_)(t.nome),1),(0,n.Lk)("td",q,(0,b.v_)(t.createdBy),1),(0,n.Lk)("td",$,(0,b.v_)(t.categoria||"-"),1),(0,n.Lk)("td",tt,(0,b.v_)(t.participantes?Object.keys(t.participantes).length:0),1)])))),128))])])])}const et={data(){return{pinos:{}}},mounted(){const t=(0,d.C3)();(0,d.Zy)((0,d.KR)(t,"pinos"),(t=>{this.pinos=t.val()||{}}))}},at=(0,s.A)(et,[["render",ot]]),nt=at,it=[{path:"/",component:O},{path:"/login",component:K}],st=(0,h.aE)({history:(0,h.LA)(),routes:it}),rt=st;st.addRoute({path:"/meus-pinos",component:N}),st.addRoute({path:"/perfil",component:G}),st.addRoute({path:"/admin",component:nt});const lt="BPKV4-twybZas1pXy_peMXUE3YibC86UIz-Xl1XRQEXe6VDOlPuUezK_GYJg6MBpj0NHz4ScNt5pHL3V8MbdA80",ut={apiKey:"AIzaSyBVi85WHOzHumj2tRNUJri95GMzJ6vypyA",authDomain:"group-by-319f5.firebaseapp.com",databaseURL:"https://group-by-319f5-default-rtdb.firebaseio.com",projectId:"group-by-319f5",storageBucket:"group-by-319f5.appspot.com",messagingSenderId:"1040400299393",appId:"1:1040400299393:web:c7d45418ed08d94489a480",measurementId:"G-Z0ZHLY1V49"},ct=(0,c.Dk)().length?(0,c.Sx)():(0,c.Wp)(ut),pt=(0,p.dG)(ct);async function dt(){try{const t=await(0,p.gf)(pt,{vapidKey:lt});t&&console.log("🔔 Token de notificação:",t)}catch(t){console.error("Erro ao gerar token:",t)}(0,p.xD)(pt,(t=>{console.log("🔔 Notificação recebida:",t),alert(t.notification.title+": "+t.notification.body)}))}const mt={apiKey:"AIzaSyBVi85WHOzHumj2tRNUJri95GMzJ6vypyA",authDomain:"group-by-319f5.firebaseapp.com",databaseURL:"https://group-by-319f5-default-rtdb.firebaseio.com",projectId:"group-by-319f5",storageBucket:"group-by-319f5.appspot.com",messagingSenderId:"1040400299393",appId:"1:1040400299393:web:c7d45418ed08d94489a480",measurementId:"G-Z0ZHLY1V49"},ht=((0,c.Wp)(mt),(0,m.xI)()),gt=(0,a.Ef)(u);gt.use(rt),(0,m.hg)(ht,(async t=>{if(t)try{const o=(0,p.dG)(),e=await(0,p.gf)(o,{vapidKey:"BPKV4-twybZas1pXy_peMXUE3YibC86UIz-Xl1XRQEXe6VDOlPuUezK_GYJg6MBpj0NHz4ScNt5pHL3V8MbdA80"});if(e){const o=(0,d.C3)();await(0,d.hZ)((0,d.KR)(o,"tokens/"+t.uid),{token:e})}}catch(o){console.warn("Não foi possível obter o token FCM:",o)}gt.mount("#app")})),dt()}},o={};function e(a){var n=o[a];if(void 0!==n)return n.exports;var i=o[a]={exports:{}};return t[a](i,i.exports,e),i.exports}e.m=t,(()=>{var t=[];e.O=(o,a,n,i)=>{if(!a){var s=1/0;for(c=0;c<t.length;c++){for(var[a,n,i]=t[c],r=!0,l=0;l<a.length;l++)(!1&i||s>=i)&&Object.keys(e.O).every((t=>e.O[t](a[l])))?a.splice(l--,1):(r=!1,i<s&&(s=i));if(r){t.splice(c--,1);var u=n();void 0!==u&&(o=u)}}return o}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[a,n,i]}})(),(()=>{e.d=(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})}})(),(()=>{e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{e.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o)})(),(()=>{var t={524:0};e.O.j=o=>0===t[o];var o=(o,a)=>{var n,i,[s,r,l]=a,u=0;if(s.some((o=>0!==t[o]))){for(n in r)e.o(r,n)&&(e.m[n]=r[n]);if(l)var c=l(e)}for(o&&o(a);u<s.length;u++)i=s[u],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(c)},a=self["webpackChunkgroupby_vue"]=self["webpackChunkgroupby_vue"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))})();var a=e.O(void 0,[504],(()=>e(36)));a=e.O(a)})();
//# sourceMappingURL=app.9d9713c2.js.map